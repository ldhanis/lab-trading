{% extends 'layouts/base.html' %}
{% load static %}
{% block head %}
{% endblock head %}
{% block body %}
    <div class="row mt-4">
        <div class="col-md-8 p-2" style="height: 70vh">
            <!-- TradingView Widget BEGIN -->
            <div id="tradingview_11380" style="height: 100%"></div>
            <div class="tradingview-widget-copyright">
                <a href="https://fr.tradingview.com/symbols/NASDAQ-AAPL/"
                   rel="noopener"
                   target="_blank"><span class="blue-text">AAPL graphique</span></a> par TradingView
            </div>
            <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
            <script type="text/javascript">
                const tradingView = new TradingView.widget(
                    {
                    "autosize": true,
                    "symbol": "KRAKEN:{{pair_symbol}}",
                    "interval": "D",
                    "timezone": "Etc/UTC",
                    "theme": "light",
                    "style": "1",
                    "locale": "fr",
                    "toolbar_bg": "#f1f3f6",
                    "enable_publishing": false,
                    "allow_symbol_change": true,
                    "container_id": "tradingview_11380"
                    }
                    );
            </script>
            <!-- TradingView Widget END -->
        </div>

        <div class="col p-2">
            <div class="card">
                <h2>You own {{amount_1.amount}} {{amount_1.currency}}</h2>
                <h2>You own {{amount_2.amount}} {{amount_2.currency}}</h2>
            </div>
        
            <div class="card mt-2">
                <h1>Create a market order</h1>
                <h2>Buy {{amount_1.currency }}</h2>
                <form method="POST" action="{% url 'buy_order' trading_screen.id currency_1.symbol currency_2.symbol 'buy' %}">
                    {% csrf_token %}
                    <input type="number" step="any" required="true" name="amount" placeholder="amount in {{amount_2.currency}}" />
                    <input type="number" step="any" name="limit" placeholder="limit price in {{amount_1.currency}}" />
                    <input type="submit">
                </form>
                <h2>Sell {{amount_1.currency }}</h2>
                <form method="POST" action="{% url 'buy_order' trading_screen.id currency_2.symbol currency_1.symbol 'sell' %}">
                    {% csrf_token %}
                    <input type="number" step="any" required="true" name="amount" placeholder="amount in {{amount_1.currency}}" />
                    <input type="number" step="any" name="limit" placeholder="limit price in {{amount_2.currency}}" />
                    <input type="submit">
                </form>
            </div>  
        
        </div>
    </div>
{% endblock body %}
